---
import Container from "../components/container.astro";
import Sectionhead from "../components/sectionhead.astro";
import Layout from "../layouts/Layout.astro";
import { getLocale } from "astro-i18n-aut";
import { useTranslations } from "../utils/i18n";

// Get locale and translations function
const locale = getLocale(Astro.url);
const t = useTranslations(Astro.url);

// Helper function to create locale-aware paths
function createLocalePath(path: string) {
  if (locale === "en") {
    return path;
  }
  return `/${locale}${path}`;
}

// Service pricing data
const announcementServices = [
  {
    serviceKey: "ipTransit.services.initialSetup.name",
    detailsKey: "ipTransit.services.initialSetup.details",
    priceKey: "ipTransit.services.initialSetup.price",
    notesKey: "ipTransit.services.initialSetup.notes"
  },
  {
    serviceKey: "ipTransit.services.maintenance.name",
    detailsKey: "ipTransit.services.maintenance.details",
    priceKey: "ipTransit.services.maintenance.price",
    notesKey: "ipTransit.services.maintenance.notes"
  },
  {
    serviceKey: "ipTransit.services.geolocation.name",
    detailsKey: "ipTransit.services.geolocation.details",
    priceKey: "ipTransit.services.geolocation.price",
    notesKey: "ipTransit.services.geolocation.notes"
  }
];

const abuseCategories = [
  {
    categoryKey: "ipTransit.abuse.copyright.name",
    descriptionKey: "ipTransit.abuse.copyright.description",
    feeKey: "ipTransit.abuse.copyright.fee"
  },
  {
    categoryKey: "ipTransit.abuse.vulnerability.name",
    descriptionKey: "ipTransit.abuse.vulnerability.description",
    feeKey: "ipTransit.abuse.vulnerability.fee"
  },
  {
    categoryKey: "ipTransit.abuse.compromise.name",
    descriptionKey: "ipTransit.abuse.compromise.description",
    feeKey: "ipTransit.abuse.compromise.fee"
  },
  {
    categoryKey: "ipTransit.abuse.spam.name",
    descriptionKey: "ipTransit.abuse.spam.description",
    feeKey: "ipTransit.abuse.spam.fee"
  },
  {
    categoryKey: "ipTransit.abuse.malicious.name",
    descriptionKey: "ipTransit.abuse.malicious.description",
    feeKey: "ipTransit.abuse.malicious.fee"
  },
  {
    categoryKey: "ipTransit.abuse.reportOwner.name",
    descriptionKey: "ipTransit.abuse.reportOwner.description",
    feeKey: "ipTransit.abuse.reportOwner.fee"
  }
];
---

<Layout title={t('ipTransit.title')}>
  <Container>
    <Sectionhead>
      <Fragment slot="title">{t('ipTransit.title')}</Fragment>
      <Fragment slot="desc">{t('ipTransit.subtitle')}</Fragment>
    </Sectionhead>

    <div class="flex flex-col gap-3 mx-auto max-w-4xl mt-16">
      <h2 class="font-bold text-3xl text-gray-800">
        {t('ipTransit.benefitsTitle')}
      </h2>
      <p class="text-lg leading-relaxed text-slate-500">
        {t('ipTransit.benefitsDescription')}
      </p>
    </div>

    <div class="grid md:grid-cols-3 gap-10 mx-auto max-w-4xl mt-10">
      <div class="bg-white p-6 rounded-lg border border-gray-100">
        <div class="text-gray-700 mb-4">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
        </div>
        <h3 class="text-xl font-semibold text-gray-800 mb-2">{t('ipTransit.benefits.cost.title')}</h3>
        <p class="text-gray-600">{t('ipTransit.benefits.cost.description')}</p>
      </div>
      
      <div class="bg-white p-6 rounded-lg border border-gray-100">
        <div class="text-gray-700 mb-4">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7" />
          </svg>
        </div>
        <h3 class="text-xl font-semibold text-gray-800 mb-2">{t('ipTransit.benefits.management.title')}</h3>
        <p class="text-gray-600">{t('ipTransit.benefits.management.description')}</p>
      </div>
      
      <div class="bg-white p-6 rounded-lg border border-gray-100">
        <div class="text-gray-700 mb-4">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4" />
          </svg>
        </div>
        <h3 class="text-xl font-semibold text-gray-800 mb-2">{t('ipTransit.benefits.control.title')}</h3>
        <p class="text-gray-600">{t('ipTransit.benefits.control.description')}</p>
      </div>
    </div>

    <div class="mx-auto max-w-4xl mt-16">
      <h2 class="font-bold text-3xl text-gray-800 mb-6">
        {t('ipTransit.servicesTitle')}
      </h2>
      <div class="bg-white rounded-lg border border-gray-100 overflow-hidden">
        <div class="overflow-x-auto">
          <table class="min-w-full">
            <thead class="bg-gray-50 border-b border-gray-200">
              <tr>
                <th class="py-3.5 px-4 text-left text-sm font-semibold text-gray-700">{t('ipTransit.table.service')}</th>
                <th class="py-3.5 px-4 text-left text-sm font-semibold text-gray-700">{t('ipTransit.table.details')}</th>
                <th class="py-3.5 px-4 text-left text-sm font-semibold text-gray-700">{t('ipTransit.table.price')}</th>
                <th class="py-3.5 px-4 text-left text-sm font-semibold text-gray-700">{t('ipTransit.table.notes')}</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-gray-200">
              {announcementServices.map((service) => (
                <tr class="hover:bg-gray-50">
                  <td class="py-4 px-4 text-sm font-medium text-gray-900">{t(service.serviceKey)}</td>
                  <td class="py-4 px-4 text-sm text-gray-700">{t(service.detailsKey)}</td>
                  <td class="py-4 px-4 text-sm text-gray-700">{t(service.priceKey)}</td>
                  <td class="py-4 px-4 text-sm text-gray-500">{t(service.notesKey)}</td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </div>
    </div>
      
    <div class="mx-auto max-w-4xl mt-16">
      <h2 class="font-bold text-3xl text-gray-800 mb-6">
        {t('ipTransit.abuseTitle')}
      </h2>
      <p class="text-lg leading-relaxed text-slate-500 mb-6">
        {t('ipTransit.abuseDescription')}
      </p>
        
      <div class="overflow-x-auto bg-white rounded-lg border border-gray-100">
        <table class="min-w-full">
          <thead class="bg-gray-50 border-b border-gray-200">
            <tr>
              <th class="py-3.5 px-4 text-left text-sm font-semibold text-gray-700">{t('ipTransit.abuseTable.category')}</th>
              <th class="py-3.5 px-4 text-left text-sm font-semibold text-gray-700">{t('ipTransit.abuseTable.description')}</th>
              <th class="py-3.5 px-4 text-left text-sm font-semibold text-gray-700">{t('ipTransit.abuseTable.fee')}</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-gray-200">
            {abuseCategories.map((category) => (
              <tr class="hover:bg-gray-50">
                <td class="py-4 px-4 text-sm font-medium text-gray-900">{t(category.categoryKey)}</td>
                <td class="py-4 px-4 text-sm text-gray-700">{t(category.descriptionKey)}</td>
                <td class="py-4 px-4 text-sm text-gray-700">{t(category.feeKey)}</td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>
        
      <p class="text-gray-600 mt-6">
        <strong class="font-semibold">{t('ipTransit.abuseNote.label')}</strong> {t('ipTransit.abuseNote.text')}
      </p>
    </div>
      
    <div class="mx-auto max-w-4xl mt-16 mb-16">
      <h2 class="font-bold text-3xl text-gray-800 mb-6">
        {t('ipTransit.examplesTitle')}
      </h2>
      <p class="text-lg leading-relaxed text-slate-500 mb-6">
        {t('ipTransit.examplesDescription')}
      </p>
        
      <div class="space-y-6">
        <div class="p-5 border border-gray-200 rounded-lg">
          <h3 class="text-lg font-semibold text-gray-800 mb-2">{t('ipTransit.examples.example1.title')}</h3>
          <p class="text-gray-600">
            {t('ipTransit.examples.example1.description')}
          </p>
        </div>
        
        <div class="p-5 border border-gray-200 rounded-lg">
          <h3 class="text-lg font-semibold text-gray-800 mb-2">{t('ipTransit.examples.example2.title')}</h3>
          <p class="text-gray-600">
            {t('ipTransit.examples.example2.description')}
          </p>
        </div>
        
        <div class="p-5 border border-gray-200 rounded-lg">
          <h3 class="text-lg font-semibold text-gray-800 mb-2">{t('ipTransit.examples.example3.title')}</h3>
          <p class="text-gray-600">
            {t('ipTransit.examples.example3.description')}
          </p>
        </div>
        
        <div class="p-5 border border-gray-200 rounded-lg">
          <h3 class="text-lg font-semibold text-gray-800 mb-2">{t('ipTransit.examples.example4.title')}</h3>
          <p class="text-gray-600">
            {t('ipTransit.examples.example4.description')}
          </p>
        </div>
      </div>
        
      <div class="mt-8 p-5 bg-gray-50 border border-gray-200 rounded-lg">
        <p class="text-gray-700">
          {t('ipTransit.encouragement')}
        </p>
      </div>
      
      <div class="mt-8 text-center">
        <a href={createLocalePath("/contact")} class="inline-flex items-center justify-center px-6 py-3 border border-gray-600 text-base font-medium rounded-md text-gray-600 hover:bg-gray-100">
          {t('ipTransit.contactCta')}
        </a>
      </div>
    </div>
  </Container>
</Layout>

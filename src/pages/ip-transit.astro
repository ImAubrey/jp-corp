---
import Container from "../components/container.astro";
import Sectionhead from "../components/sectionhead.astro";
import Layout from "../layouts/Layout.astro";
import { getLocale } from "astro-i18n-aut";
import { useTranslations } from "../utils/i18n";

// Get locale and translations function
const locale = getLocale(Astro.url);
const t = useTranslations(Astro.url);

// Helper function to create locale-aware paths
function createLocalePath(path: string) {
  if (locale === "en") {
    return path;
  }
  return `/${locale}${path}`;
}

// Service pricing data
const announcementServices = [
  {
    serviceKey: "ipTransit.services.initialSetup.name",
    detailsKey: "ipTransit.services.initialSetup.details",
    priceKey: "ipTransit.services.initialSetup.price",
    notesKey: "ipTransit.services.initialSetup.notes"
  },
  {
    serviceKey: "ipTransit.services.maintenance.name",
    detailsKey: "ipTransit.services.maintenance.details",
    priceKey: "ipTransit.services.maintenance.price",
    notesKey: "ipTransit.services.maintenance.notes"
  },
  {
    serviceKey: "ipTransit.services.geolocation.name",
    detailsKey: "ipTransit.services.geolocation.details",
    priceKey: "ipTransit.services.geolocation.price",
    notesKey: "ipTransit.services.geolocation.notes"
  }
];

const abuseCategories = [
  {
    categoryKey: "ipTransit.abuse.copyright.name",
    descriptionKey: "ipTransit.abuse.copyright.description",
    feeKey: "ipTransit.abuse.copyright.fee"
  },
  {
    categoryKey: "ipTransit.abuse.vulnerability.name",
    descriptionKey: "ipTransit.abuse.vulnerability.description",
    feeKey: "ipTransit.abuse.vulnerability.fee"
  },
  {
    categoryKey: "ipTransit.abuse.compromise.name",
    descriptionKey: "ipTransit.abuse.compromise.description",
    feeKey: "ipTransit.abuse.compromise.fee"
  },
  {
    categoryKey: "ipTransit.abuse.spam.name",
    descriptionKey: "ipTransit.abuse.spam.description",
    feeKey: "ipTransit.abuse.spam.fee"
  },
  {
    categoryKey: "ipTransit.abuse.malicious.name",
    descriptionKey: "ipTransit.abuse.malicious.description",
    feeKey: "ipTransit.abuse.malicious.fee"
  },
  {
    categoryKey: "ipTransit.abuse.reportOwner.name",
    descriptionKey: "ipTransit.abuse.reportOwner.description",
    feeKey: "ipTransit.abuse.reportOwner.fee"
  }
];

const networkStats = [
  {
    labelKey: "ipTransit.networkStats.reach.label",
    valueKey: "ipTransit.networkStats.reach.value"
  },
  {
    labelKey: "ipTransit.networkStats.routing.label",
    valueKey: "ipTransit.networkStats.routing.value"
  },
  {
    labelKey: "ipTransit.networkStats.monitoring.label",
    valueKey: "ipTransit.networkStats.monitoring.value"
  },
  {
    labelKey: "ipTransit.networkStats.availability.label",
    valueKey: "ipTransit.networkStats.availability.value"
  }
];

const capabilityItems = [
  {
    titleKey: "ipTransit.capabilities.items.policy.title",
    descriptionKey: "ipTransit.capabilities.items.policy.description"
  },
  {
    titleKey: "ipTransit.capabilities.items.redundancy.title",
    descriptionKey: "ipTransit.capabilities.items.redundancy.description"
  },
  {
    titleKey: "ipTransit.capabilities.items.ipv6.title",
    descriptionKey: "ipTransit.capabilities.items.ipv6.description"
  },
  {
    titleKey: "ipTransit.capabilities.items.security.title",
    descriptionKey: "ipTransit.capabilities.items.security.description"
  }
];

const onboardingSteps = [
  {
    titleKey: "ipTransit.onboarding.steps.step1.title",
    descriptionKey: "ipTransit.onboarding.steps.step1.description"
  },
  {
    titleKey: "ipTransit.onboarding.steps.step2.title",
    descriptionKey: "ipTransit.onboarding.steps.step2.description"
  },
  {
    titleKey: "ipTransit.onboarding.steps.step3.title",
    descriptionKey: "ipTransit.onboarding.steps.step3.description"
  },
  {
    titleKey: "ipTransit.onboarding.steps.step4.title",
    descriptionKey: "ipTransit.onboarding.steps.step4.description"
  }
];

const useCases = [
  {
    titleKey: "ipTransit.useCases.isp.title",
    descriptionKey: "ipTransit.useCases.isp.description"
  },
  {
    titleKey: "ipTransit.useCases.hosting.title",
    descriptionKey: "ipTransit.useCases.hosting.description"
  },
  {
    titleKey: "ipTransit.useCases.enterprise.title",
    descriptionKey: "ipTransit.useCases.enterprise.description"
  },
  {
    titleKey: "ipTransit.useCases.content.title",
    descriptionKey: "ipTransit.useCases.content.description"
  }
];

const faqItems = [
  {
    questionKey: "ipTransit.faq.items.q1.question",
    answerKey: "ipTransit.faq.items.q1.answer"
  },
  {
    questionKey: "ipTransit.faq.items.q2.question",
    answerKey: "ipTransit.faq.items.q2.answer"
  },
  {
    questionKey: "ipTransit.faq.items.q3.question",
    answerKey: "ipTransit.faq.items.q3.answer"
  },
  {
    questionKey: "ipTransit.faq.items.q4.question",
    answerKey: "ipTransit.faq.items.q4.answer"
  }
];
---

<Layout title={t('ipTransit.title')}>
  <Container>
    <Sectionhead>
      <Fragment slot="title">{t('ipTransit.title')}</Fragment>
      <Fragment slot="desc">{t('ipTransit.subtitle')}</Fragment>
    </Sectionhead>

    <div class="flex flex-col gap-3 mx-auto max-w-4xl mt-16">
      <h2 class="font-bold text-3xl text-gray-800">
        {t('ipTransit.benefitsTitle')}
      </h2>
      <p class="text-lg leading-relaxed text-slate-500">
        {t('ipTransit.benefitsDescription')}
      </p>
    </div>

    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-10 mx-auto max-w-4xl mt-10">
      <div class="bg-white p-6 rounded-lg border border-gray-100">
        <div class="text-gray-700 mb-4">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
        </div>
        <h3 class="text-xl font-semibold text-gray-800 mb-2">{t('ipTransit.benefits.cost.title')}</h3>
        <p class="text-gray-600">{t('ipTransit.benefits.cost.description')}</p>
      </div>
      
      <div class="bg-white p-6 rounded-lg border border-gray-100">
        <div class="text-gray-700 mb-4">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7" />
          </svg>
        </div>
        <h3 class="text-xl font-semibold text-gray-800 mb-2">{t('ipTransit.benefits.management.title')}</h3>
        <p class="text-gray-600">{t('ipTransit.benefits.management.description')}</p>
      </div>
      
      <div class="bg-white p-6 rounded-lg border border-gray-100">
        <div class="text-gray-700 mb-4">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4" />
          </svg>
        </div>
        <h3 class="text-xl font-semibold text-gray-800 mb-2">{t('ipTransit.benefits.control.title')}</h3>
        <p class="text-gray-600">{t('ipTransit.benefits.control.description')}</p>
      </div>

      <div class="bg-white p-6 rounded-lg border border-gray-100">
        <div class="text-gray-700 mb-4">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h10M7 12h6m-6 5h10M5 5v14M19 5v14" />
          </svg>
        </div>
        <h3 class="text-xl font-semibold text-gray-800 mb-2">{t('ipTransit.benefits.routing.title')}</h3>
        <p class="text-gray-600">{t('ipTransit.benefits.routing.description')}</p>
      </div>

      <div class="bg-white p-6 rounded-lg border border-gray-100">
        <div class="text-gray-700 mb-4">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 11c1.657 0 3-1.343 3-3S13.657 5 12 5s-3 1.343-3 3 1.343 3 3 3zm0 0c-3.314 0-6 2.239-6 5v2h12v-2c0-2.761-2.686-5-6-5z" />
          </svg>
        </div>
        <h3 class="text-xl font-semibold text-gray-800 mb-2">{t('ipTransit.benefits.reputation.title')}</h3>
        <p class="text-gray-600">{t('ipTransit.benefits.reputation.description')}</p>
      </div>
    </div>

    <div class="mx-auto max-w-5xl mt-16">
      <div class="grid gap-10 lg:grid-cols-[1.1fr_0.9fr]">
        <div>
          <h2 class="font-bold text-3xl text-gray-800">
            {t('ipTransit.networkTitle')}
          </h2>
          <p class="text-lg leading-relaxed text-slate-500 mt-4">
            {t('ipTransit.networkDescription')}
          </p>
          <div class="mt-8 grid gap-4">
            {capabilityItems.map((item) => (
              <div class="rounded-xl border border-gray-200 bg-white p-4 shadow-sm">
                <h3 class="text-lg font-semibold text-gray-800">{t(item.titleKey)}</h3>
                <p class="text-sm text-slate-600 mt-2">{t(item.descriptionKey)}</p>
              </div>
            ))}
          </div>
        </div>
        <div class="grid gap-4 sm:grid-cols-2">
          {networkStats.map((stat) => (
            <div class="rounded-xl border border-gray-200 bg-slate-50 p-4">
              <p class="text-xs uppercase tracking-[0.2em] text-slate-400">
                {t(stat.labelKey)}
              </p>
              <p class="mt-3 text-lg font-semibold text-slate-800">
                {t(stat.valueKey)}
              </p>
            </div>
          ))}
          <div class="rounded-xl border border-gray-200 bg-white p-4 sm:col-span-2">
            <p class="text-sm text-slate-600">
              {t('ipTransit.networkNote')}
            </p>
            <div class="mt-4 flex flex-wrap gap-3">
              <a href={createLocalePath("/data-centers/")} class="inline-flex items-center justify-center px-4 py-2 text-sm font-medium text-slate-700 border border-slate-300 rounded-full hover:border-slate-400">
                {t('ipTransit.networkLinks.dataCenters')}
              </a>
              <a href={createLocalePath("/ip-transit/pricing/")} class="inline-flex items-center justify-center px-4 py-2 text-sm font-medium text-slate-700 border border-slate-300 rounded-full hover:border-slate-400">
                {t('ipTransit.networkLinks.pricing')}
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="mx-auto max-w-5xl mt-16">
      <h2 class="font-bold text-3xl text-gray-800">
        {t('ipTransit.onboardingTitle')}
      </h2>
      <p class="text-lg leading-relaxed text-slate-500 mt-4">
        {t('ipTransit.onboardingDescription')}
      </p>
      <div class="mt-8 grid gap-6 md:grid-cols-4">
        {onboardingSteps.map((step, index) => (
          <div class="rounded-xl border border-gray-200 bg-white p-5 shadow-sm">
            <div class="flex items-center gap-3">
              <span class="inline-flex h-10 w-10 items-center justify-center rounded-full bg-slate-900 text-white font-semibold">
                {index + 1}
              </span>
              <h3 class="text-base font-semibold text-gray-800">{t(step.titleKey)}</h3>
            </div>
            <p class="mt-3 text-sm text-slate-600">
              {t(step.descriptionKey)}
            </p>
          </div>
        ))}
      </div>
    </div>

    <div class="mx-auto max-w-4xl mt-16">
      <h2 class="font-bold text-3xl text-gray-800 mb-6">
        {t('ipTransit.servicesTitle')}
      </h2>
      <p class="text-lg leading-relaxed text-slate-500 mb-6">
        {t('ipTransit.servicesDescription')}
      </p>
      <div class="bg-white rounded-lg border border-gray-100 overflow-hidden">
        <div class="overflow-x-auto">
          <table class="min-w-full">
            <thead class="bg-gray-50 border-b border-gray-200">
              <tr>
                <th class="py-3.5 px-4 text-left text-sm font-semibold text-gray-700">{t('ipTransit.table.service')}</th>
                <th class="py-3.5 px-4 text-left text-sm font-semibold text-gray-700">{t('ipTransit.table.details')}</th>
                <th class="py-3.5 px-4 text-left text-sm font-semibold text-gray-700">{t('ipTransit.table.price')}</th>
                <th class="py-3.5 px-4 text-left text-sm font-semibold text-gray-700">{t('ipTransit.table.notes')}</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-gray-200">
              {announcementServices.map((service) => (
                <tr class="hover:bg-gray-50">
                  <td class="py-4 px-4 text-sm font-medium text-gray-900">{t(service.serviceKey)}</td>
                  <td class="py-4 px-4 text-sm text-gray-700">{t(service.detailsKey)}</td>
                  <td class="py-4 px-4 text-sm text-gray-700">{t(service.priceKey)}</td>
                  <td class="py-4 px-4 text-sm text-gray-500">{t(service.notesKey)}</td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <div class="mx-auto max-w-5xl mt-16">
      <h2 class="font-bold text-3xl text-gray-800">
        {t('ipTransit.useCasesTitle')}
      </h2>
      <p class="text-lg leading-relaxed text-slate-500 mt-4">
        {t('ipTransit.useCasesDescription')}
      </p>
      <div class="mt-8 grid gap-6 md:grid-cols-2">
        {useCases.map((item) => (
          <div class="rounded-2xl border border-gray-200 bg-white p-6 shadow-sm">
            <h3 class="text-lg font-semibold text-gray-800">{t(item.titleKey)}</h3>
            <p class="mt-3 text-sm text-slate-600">{t(item.descriptionKey)}</p>
          </div>
        ))}
      </div>
    </div>
      
    <div class="mx-auto max-w-4xl mt-16">
      <details class="rounded-2xl border border-gray-200 bg-white shadow-sm">
        <summary class="cursor-pointer list-none px-6 py-5">
          <div class="flex flex-col gap-2">
            <h2 class="font-bold text-3xl text-gray-800">
              {t('ipTransit.abuseTitle')}
            </h2>
            <p class="text-sm text-slate-500">
              {t('ipTransit.abuseToggleHint')}
            </p>
          </div>
        </summary>
        <div class="px-6 pb-6">
          <p class="text-lg leading-relaxed text-slate-500 mb-6">
            {t('ipTransit.abuseDescription')}
          </p>

          <div class="overflow-x-auto bg-white rounded-lg border border-gray-100">
            <table class="min-w-full">
              <thead class="bg-gray-50 border-b border-gray-200">
                <tr>
                  <th class="py-3.5 px-4 text-left text-sm font-semibold text-gray-700">{t('ipTransit.abuseTable.category')}</th>
                  <th class="py-3.5 px-4 text-left text-sm font-semibold text-gray-700">{t('ipTransit.abuseTable.description')}</th>
                  <th class="py-3.5 px-4 text-left text-sm font-semibold text-gray-700">{t('ipTransit.abuseTable.fee')}</th>
                </tr>
              </thead>
              <tbody class="divide-y divide-gray-200">
                {abuseCategories.map((category) => (
                  <tr class="hover:bg-gray-50">
                    <td class="py-4 px-4 text-sm font-medium text-gray-900">{t(category.categoryKey)}</td>
                    <td class="py-4 px-4 text-sm text-gray-700">{t(category.descriptionKey)}</td>
                    <td class="py-4 px-4 text-sm text-gray-700">{t(category.feeKey)}</td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>

          <p class="text-gray-600 mt-6">
            <strong class="font-semibold">{t('ipTransit.abuseNote.label')}</strong> {t('ipTransit.abuseNote.text')}
          </p>

          <div class="mt-10">
            <h3 class="font-semibold text-2xl text-gray-800 mb-4">
              {t('ipTransit.examplesTitle')}
            </h3>
            <p class="text-base leading-relaxed text-slate-500 mb-6">
              {t('ipTransit.examplesDescription')}
            </p>
            <div class="space-y-4">
              <div class="p-5 border border-gray-200 rounded-lg">
                <h4 class="text-lg font-semibold text-gray-800 mb-2">{t('ipTransit.examples.example1.title')}</h4>
                <p class="text-gray-600">
                  {t('ipTransit.examples.example1.description')}
                </p>
              </div>

              <div class="p-5 border border-gray-200 rounded-lg">
                <h4 class="text-lg font-semibold text-gray-800 mb-2">{t('ipTransit.examples.example2.title')}</h4>
                <p class="text-gray-600">
                  {t('ipTransit.examples.example2.description')}
                </p>
              </div>

              <div class="p-5 border border-gray-200 rounded-lg">
                <h4 class="text-lg font-semibold text-gray-800 mb-2">{t('ipTransit.examples.example3.title')}</h4>
                <p class="text-gray-600">
                  {t('ipTransit.examples.example3.description')}
                </p>
              </div>

              <div class="p-5 border border-gray-200 rounded-lg">
                <h4 class="text-lg font-semibold text-gray-800 mb-2">{t('ipTransit.examples.example4.title')}</h4>
                <p class="text-gray-600">
                  {t('ipTransit.examples.example4.description')}
                </p>
              </div>
            </div>

            <div class="mt-6 p-5 bg-gray-50 border border-gray-200 rounded-lg">
              <p class="text-gray-700">
                {t('ipTransit.encouragement')}
              </p>
            </div>
          </div>
        </div>
      </details>
    </div>

    <div class="mx-auto max-w-5xl mt-16">
      <h2 class="font-bold text-3xl text-gray-800">
        {t('ipTransit.faqTitle')}
      </h2>
      <p class="text-lg leading-relaxed text-slate-500 mt-4">
        {t('ipTransit.faqDescription')}
      </p>
      <div class="mt-8 space-y-4">
        {faqItems.map((item) => (
          <details class="rounded-xl border border-gray-200 bg-white p-5">
            <summary class="cursor-pointer list-none text-base font-semibold text-gray-800">
              {t(item.questionKey)}
            </summary>
            <p class="mt-3 text-sm text-slate-600">
              {t(item.answerKey)}
            </p>
          </details>
        ))}
      </div>
    </div>

    <div class="mx-auto max-w-5xl mt-16 mb-20">
      <div class="rounded-2xl bg-slate-900 px-8 py-10 text-white md:px-10">
        <h2 class="text-3xl font-bold">{t('ipTransit.finalCta.title')}</h2>
        <p class="mt-4 text-lg text-slate-200">{t('ipTransit.finalCta.description')}</p>
        <div class="mt-6 flex flex-wrap gap-4">
          <a href={createLocalePath("/contact")} class="inline-flex items-center justify-center rounded-full bg-white px-6 py-3 text-sm font-semibold text-slate-900 hover:bg-slate-100">
            {t('ipTransit.finalCta.primary')}
          </a>
          <a href={createLocalePath("/ip-transit/pricing/")} class="inline-flex items-center justify-center rounded-full border border-white/50 px-6 py-3 text-sm font-semibold text-white hover:border-white">
            {t('ipTransit.finalCta.secondary')}
          </a>
        </div>
      </div>
    </div>
  </Container>
</Layout>
